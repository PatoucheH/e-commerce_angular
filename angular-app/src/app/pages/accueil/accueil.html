<app-product-modal></app-product-modal>

<div
  class="relative w-full h-96 flex flex-col items-center justify-center text-center bg-cover bg-center"
  style="background-image: url('/Bg-e-commerce.jpg')"
>
  <!-- Overlay sombre pour améliorer la lisibilité -->
  <div class="absolute inset-0 bg-black bg-opacity-50"></div>

  <!-- Contenu centré -->
  <div class="relative z-10 px-4">
    <h1 class="text-white text-6xl sm:text-7xl font-bold mb-4">
      Bienvenue sur mon E-commerce
    </h1>
  </div>
</div>

<div class="text-center p-8">
  @if(products.length > 0){
  <div class="relative max-w-4xl mx-auto">
    <h2 class="mt-8 p-10 text-3xl text-underline">
      Nos produits les mieux notés
    </h2>
    <div class="flex items-center justify-center space-x-4">
      <a (click)="openModal(products[getPrevIndex()])" class="cursor-pointer">
        <div
          class="w-64 bg-gray-300 rounded-lg shadow opacity-50 p-4 transform scale-90 transition-all duration-300 ease-in-out"
        >
          <img
            [src]="products[getPrevIndex()].imageUrl"
            [alt]="products[getPrevIndex()].name"
            class="w-full h-32 object-cover rounded mb-2 transition-all duration-300"
          />
          <h3 class="text-lg transition-all duration-300">
            {{ products[getPrevIndex()].name }}
          </h3>
          <p class="text-gray-600 transition-all duration-300">
            {{ products[getPrevIndex()].price }}€
          </p>
        </div>
      </a>
      <a (click)="openModal(products[currentSlide])" class="cursor-pointer">
        <div
          class="w-80 bg-white rounded-lg shadow-lg p-6 transform scale-100 z-10 transition-all duration-300 ease-in-out"
        >
          <img
            [src]="products[currentSlide].imageUrl"
            [alt]="products[currentSlide].name"
            class="w-full h-48 object-cover rounded mb-4 transition-all duration-300"
          />
          <h3 class="text-xl font-bold transition-all duration-300">
            {{ products[currentSlide].name }}
          </h3>
          <p
            class="text-blue-600 text-lg font-semibold transition-all duration-300"
          >
            {{ products[currentSlide].price }}€
          </p>
        </div>
      </a>
      <a (click)="openModal(products[getNextIndex()])" class="cursor-pointer">
        <div
          class="w-64 bg-gray-300 rounded-lg shadow opacity-50 p-4 transform scale-90 transition-all duration-300 ease-in-out"
        >
          <img
            src="{{ products[getNextIndex()].imageUrl }}"
            [alt]="products[getNextIndex()].name"
            class="w-full h-32 object-cover rounded mb-2 transition-all duration-300"
          />
          <h3 class="text-lg transition-all duration-300">
            {{ products[getNextIndex()].name }}
          </h3>
          <p class="text-gray-600 transition-all duration-300">
            {{ products[getNextIndex()].price }}€
          </p>
        </div>
      </a>
    </div>
    <button
      (click)="prevSlide()"
      class="absolute left-0 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white w-12 h-12 rounded-full hover:bg-opacity-70 transition-all duration-200 disabled:opacity-30"
    >
      ←
    </button>
    <button
      (click)="nextSlide()"
      class="absolute right-0 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white w-12 h-12 rounded-full hover:bg-opacity-70 transition-all duration-200 disabled:opacity-30"
    >
      →
    </button>

    <div class="flex justify-center mt-6 space-x-2">
      <div
        *ngFor="let produit of products; let i = index"
        (click)="currentSlide = i"
        class="w-3 h-3 rounded-full cursor-pointer transition-all duration-300"
        [class.bg-blue-600]="i === currentSlide"
        [class.bg-gray-300]="i !== currentSlide"
      ></div>
    </div>
  </div>

  <div class="mt-8">
    <a
      routerLink="/products"
      class="bg-blue-600 text-white px-6 py-3 rounded hover:bg-blue-700 transition-colors duration-200"
    >
      Voir tous nos produits
    </a>
  </div>
  } @else {
  <p class="text-center">Chargement des produits...</p>
  }
</div>
